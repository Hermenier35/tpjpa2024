/*C7*/SET SCHEMA PUBLIC
drop schema public cascade
/*C8*/SET SCHEMA PUBLIC
create sequence Question_SEQ start with 1 increment by 50
create sequence Quizz_SEQ start with 1 increment by 50
create sequence Response_SEQ start with 1 increment by 50
create sequence User_SEQ start with 1 increment by 50
create table Kahoot (pin integer not null, timer integer not null, end_time timestamp(6), id bigint not null, kahoot_id bigint unique, start_time timestamp(6), primary key (id))
create table KahootResponses (score integer not null, time integer not null, id bigint not null, id_kahoot bigint not null, response_id bigint unique, user_id bigint, primary key (id))
create table list_questions (question_id bigint not null, quizz_id bigint not null)
create table list_responses (question_id bigint not null, response_id bigint not null)
create table Question (nrbReponses integer not null, id bigint not null, question varchar(255), primary key (id))
create table Quizz (id bigint not null, user_id bigint, name varchar(255), theme varchar(255), primary key (id))
create table Response (good boolean not null, id bigint not null, response varchar(255), primary key (id))
create table User (id bigint not null, kahoot_id bigint, nom varchar(255), prenom varchar(255), pseudo varchar(255), type varchar(255), primary key (id))
alter table Kahoot add constraint FKhsilhuh1l3ar3yjx0huqwcqfb foreign key (kahoot_id) references Quizz
alter table KahootResponses add constraint FKkivuruy0qkwk3dnvvwn597yr3 foreign key (response_id) references Response
alter table KahootResponses add constraint FKpqno3o62exi70wdcdrhdh7m4v foreign key (user_id) references User
alter table list_questions add constraint FK4rwemvdhhqib4pc745fqsljbi foreign key (question_id) references Question
alter table list_questions add constraint FKitnkj08x5w8bl5bl45vi80klu foreign key (quizz_id) references Quizz
alter table list_responses add constraint FKbj60xss5krgx7xsomv8kng3kl foreign key (response_id) references Response
alter table list_responses add constraint FKrl70xewdydma30rlcioq76vr7 foreign key (question_id) references Question
alter table Quizz add constraint FK5qvuwbph08ead26tk1y5ew664 foreign key (user_id) references User
alter table User add constraint FKpukk4vf63rdc1k2hrhd3r9gfm foreign key (kahoot_id) references Kahoot
INSERT INTO QUIZZ VALUES(1,NULL,'Mon super quizz a une question','Quizz 20 questions')
INSERT INTO QUESTION VALUES(2,1,'Question 1 ?')
INSERT INTO RESPONSE VALUES(FALSE,1,'responseA')
INSERT INTO RESPONSE VALUES(FALSE,2,'responseB')
INSERT INTO RESPONSE VALUES(TRUE,3,'responseC')
INSERT INTO RESPONSE VALUES(TRUE,4,'responseD')
INSERT INTO KAHOOT VALUES(4444,15,'2024-09-17 09:58:51.972000',0,1,'2024-09-17 09:48:51.972000')
INSERT INTO USER VALUES(1,NULL,NULL,NULL,'pio',NULL)
INSERT INTO LIST_QUESTIONS VALUES(1,1)
INSERT INTO LIST_RESPONSES VALUES(1,1)
INSERT INTO LIST_RESPONSES VALUES(1,2)
INSERT INTO LIST_RESPONSES VALUES(1,3)
INSERT INTO LIST_RESPONSES VALUES(1,4)
DELETE FROM USER WHERE ID=1
INSERT INTO USER VALUES(1,0,NULL,NULL,'pio',NULL)
ALTER SEQUENCE PUBLIC.QUIZZ_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.QUESTION_SEQ RESTART WITH 51
ALTER SEQUENCE PUBLIC.RESPONSE_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.USER_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C7*/DISCONNECT
